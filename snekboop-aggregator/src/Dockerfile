FROM python:3
COPY requirements.txt /
RUN pip install -r requirements.txt
COPY aggregator.py /

ARG SNEKBOOP_AGGREGATOR_PORT
ARG AWS_ACCESS_KEY_ID
ARG AWS_SECRET_ACCESS_KEY
ENV SNEKBOOP_AGGREGATOR_PORT=${SNEKBOOP_AGGREGATOR_PORT}
ENV AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}
ENV AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}
ENTRYPOINT [ "python", "aggregator.py" ]